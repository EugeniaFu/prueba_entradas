<div class="modal fade" id="modalCobroExtra" tabindex="-1" aria-labelledby="modalCobroExtraLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <form id="form-cobro-extra">
            <div class="modal-content card-borde-azul">
                <div class="modal-header modal-header-azul">
                    <h5 class="modal-title" id="modalCobroExtraLabel">Cobro Extra</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <!-- Tabla de detalles de cobro extra -->
                        <div class="col-md-8 d-flex flex-column">
                            <div class="card card-borde-azul h-100">
                                <div class="card-header card-header-azul">
                                    <i class="bi bi-list-check"></i> Detalles de piezas afectadas
                                </div>
                                <div class="card-body p-0">
                                    <div id="detalle-cobro-extra">
                                        <!-- Aquí se inyecta la tabla por JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Campos de cobro y observaciones -->
                        <div class="col-md-4 d-flex flex-column">
                            <div class="card card-borde-azul mb-2">
                                <div class="card-header card-header-azul">
                                    <i class="bi bi-cash-coin"></i> Cobro y Pago
                                </div>
                                <div class="card-body">
                                    <div class="mb-2">
                                        <strong>Subtotal:</strong> $<span id="subtotal-cobro-extra">0.00</span>
                                    </div>
                                    <div class="mb-2">
                                        <strong>IVA (16%):</strong> $<span id="iva-cobro-extra">0.00</span>
                                    </div>
                                    <div class="mb-2 bg-light border rounded px-2 py-1"
                                        style="border-left: 4px solid #dc3545;">
                                        <strong class="text-danger fw-bold">TOTAL:</strong>
                                        <span class="text-danger fw-bold">$<span
                                                id="total-cobro-extra-con-iva">0.00</span></span>
                                    </div>
                                    <div class="mb-2">
                                        <label for="metodo-pago-extra" class="form-label">Método de pago</label>
                                        <select id="metodo-pago-extra" name="metodo_pago" class="form-select">
                                            <option value="efectivo">Efectivo</option>
                                            <option value="transferencia">Transferencia</option>
                                            <option value="tarjeta_debito">Tarjeta Débito</option>
                                            <option value="tarjeta_credito">Tarjeta Crédito</option>
                                        </select>
                                    </div>
                                    <div class="mb-2" id="grupo-numero-seguimiento" style="display:none;">
                                        <label for="numero-seguimiento-extra" class="form-label">Número de
                                            seguimiento</label>
                                        <input type="text" id="numero-seguimiento-extra" name="numero_seguimiento"
                                            class="form-control">
                                    </div>
                                    <div class="mb-2">
                                        <label for="facturable-extra" class="form-label">¿Requiere factura?</label>
                                        <select id="facturable-extra" name="facturable" class="form-select">
                                            <option value="0">No</option>
                                            <option value="1">Sí</option>
                                        </select>
                                    </div>
                                    <div class="mb-2">
                                        <label for="monto-recibido-extra" class="form-label">Monto recibido</label>
                                        <input type="number" id="monto-recibido-extra" name="monto_recibido"
                                            class="form-control" min="0" step="0.01">
                                    </div>
                                    <div class="mb-2">
                                        <label for="cambio-extra" class="form-label">Cambio</label>
                                        <input type="number" id="cambio-extra" name="cambio" class="form-control"
                                            min="0" step="0.01" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="card card-borde-azul h-100">
                                <div class="card-header card-header-azul">
                                    <i class="bi bi-chat-dots"></i> Observaciones
                                </div>
                                <div class="card-body">
                                    <textarea id="observaciones-cobro-extra" name="observaciones" class="form-control"
                                        rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer modal-footer-azul">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-success">Guardar cobro extra</button>
                </div>
            </div>
        </form>
    </div>
</div>