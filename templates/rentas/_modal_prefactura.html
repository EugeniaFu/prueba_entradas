<div class="modal fade" id="modalPrefacturaPago" tabindex="-1" aria-labelledby="modalPrefacturaPagoLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg"><!-- Cambiado a modal-lg -->
    <form id="form-pago-prefactura-pago" method="post" autocomplete="off" class="modal-content card-borde-azul">
      <div class="modal-header modal-header-azul">
        <h5 class="modal-title" id="modalPrefacturaPagoLabel">
          <i class="bi bi-receipt"></i> Prefactura y Pago
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <!-- Tipo de Prefactura -->
        <div class="card card-borde-azul mb-3">
          <div class="card-header card-header-azul">
            <h6 class="mb-0"><i class="bi bi-file-earmark-text"></i> Tipo de Prefactura</h6>
          </div>
          <div class="card-body">
            <label for="tipo_prefactura_pago" class="form-label">Tipo de Prefactura</label>
            <select id="tipo_prefactura_pago" name="tipo_prefactura" class="form-select">
              <option value="inicial">Inicial</option>
              <option value="servicio">Servicio</option>
              <option value="recargo">Recargo</option>
              <option value="renovacion">Renovación</option>
            </select>
          </div>
        </div>
        <!-- Tabla de desglose de productos (rellenada por JS) -->
        <div class="card card-borde-azul mb-3">
          <div class="card-header card-header-azul">
            <h6 class="mb-0"><i class="bi bi-list-ul"></i> Detalle de la Prefactura</h6>
          </div>
          <div class="card-body">
            <div id="prefactura-detalle-pago">Aquí va el detalle de la prefactura</div>
            <div class="mt-3">
              <strong>Total: $<span id="prefactura-total-pago">0.00</span></strong>
            </div>
          </div>
        </div>
        <!-- Sección de pago -->
        <div class="card card-borde-azul mb-3">
          <div class="card-header card-header-gris">
            <h6 class="mb-0"><i class="bi bi-cash-coin"></i> Pago</h6>
          </div>
          <div class="card-body">
            <div class="mb-2">
              <strong>Total a pagar: $<span id="pago-total-pago">0.00</span></strong>
            </div>
            <div class="row">
              <div class="mb-2 col-md-6">
                <div class="form-check">
                  <label for="facturable">¿Requiere facturación?</label>
                  <select id="facturable" name="facturable" class="form-select" required>
                    <option value="">Selecciona una respuesta</option>
                    <option value="1">Sí</option>
                    <option value="0">No</option>
                  </select>
                </div>
              </div>
              <div class="mb-2 col-md-6">
                <label for="metodo-pago-pago">Método de pago:</label>
                <select id="metodo-pago-pago" name="metodo_pago" class="form-select" required>
                  <option value="EFECTIVO">Efectivo</option>
                  <option value="T.DÉBITO">Tarjeta Débito</option>
                  <option value="T.CRÉDITO">Tarjeta Crédito</option>
                  <option value="TRANSFERENCIA">Transferencia</option>
                </select>
              </div>
              <div id="pago-efectivo-pago" class="col-md-6" style="display:none;">
                <label for="monto-recibido-pago">Monto recibido:</label>
                <input type="number" id="monto-recibido-pago" name="monto_recibido" class="form-control" min="0"
                  step="0.01">
                <div>Cambio: $<span id="cambio-pago">0.00</span></div>
              </div>
              <div id="pago-seguimiento-pago" class="col-md-6" style="display:none;">
                <label for="numero-seguimiento-pago">Número de seguimiento:</label>
                <input type="text" id="numero-seguimiento-pago" name="numero_seguimiento" class="form-control"
                  placeholder="Número de seguimiento del banco">
                <div class="mt-2">
                  <small class="text-muted">Monto exacto: $<span id="monto-exacto-display">0.00</span></small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer modal-footer-azul">
        <button class="btn btn-success" id="btn-generar-pago-pago" type="submit" style="display: none;">
          Generar pago
        </button>
      </div>
    </form>
  </div>
</div>